# 🔑 API配置指南

## 🎯 为什么需要配置API？

当前系统检测到您尚未配置 **OpenAI API 密钥**，因此只能使用**演示模式**生成预览图片。要生成真实的AI贴图，您需要配置您的OpenAI API密钥。

## 📋 配置步骤

### 1️⃣ 获取 OpenAI API 密钥

1. 访问 [OpenAI API 官网](https://platform.openai.com/api-keys)
2. 登录或注册 OpenAI 账户
3. 点击 "Create new secret key"
4. 复制生成的 API 密钥（以 `sk-` 开头）

### 2️⃣ 配置环境变量

1. **复制环境变量模板文件**：
   ```bash
   cp .env.example .env
   ```

2. **编辑 .env 文件**：
   ```bash
   # 使用文本编辑器打开 .env 文件
   nano .env
   # 或者
   code .env
   ```

3. **设置您的 API 密钥**：
   ```bash
   # 将这行：
   OPENAI_API_KEY=your_openai_api_key_here
   
   # 改为：
   OPENAI_API_KEY=sk-your-actual-api-key-here
   ```

### 3️⃣ 重启应用

保存 `.env` 文件后，重启 Flask 应用：

```bash
# 停止当前应用 (Ctrl+C)
# 然后重新启动
python app.py
```

## 💰 费用说明

### OpenAI API 费用（2024年8月价格）：

| 服务 | 价格 | 备注 |
|------|------|------|
| **GPT-4** | $0.03/1K tokens | 用于生成创意和提示词 |
| **DALL-E 3** | $0.040/张 | 用于生成1024×1024图片 |

### 实际使用成本：

| 套装类型 | 贴图数量 | GPT-4成本 | DALL-E成本 | 总成本(USD) | 总成本(RMB) |
|---------|---------|-----------|-----------|------------|-------------|
| 基础版 | 8张 | ~$0.15 | $0.32 | **$0.47** | **¥3.3** |
| 标准版 | 16张 | ~$0.15 | $0.64 | **$0.79** | **¥5.5** |
| 豪华版 | 24张 | ~$0.15 | $0.96 | **$1.11** | **¥7.8** |

> 💡 **提示**：初次使用OpenAI API通常有免费额度，足够测试使用。

## 🔐 安全提醒

⚠️ **重要**：
- 不要将 `.env` 文件提交到 Git 仓库
- 不要在代码中硬编码 API 密钥
- 不要与他人分享您的 API 密钥
- 定期检查 API 使用量和费用

## ✅ 验证配置

配置完成后，访问 [http://localhost:5001/line_custom](http://localhost:5001/line_custom)：

- ✅ **配置成功**：页面顶部显示绿色提示"API已配置"
- ❌ **配置失败**：页面顶部显示黄色警告"API配置提醒"

## 🎮 演示模式 vs 真实模式

### 🎭 演示模式（无API密钥）
- ✅ 完整的界面体验
- ✅ 合规性检查
- ✅ 生成预览图片
- ✅ LINE标准打包
- ❌ 非AI生成的图片

### 🤖 真实模式（已配置API）
- ✅ 所有演示模式功能
- ✅ **真实AI生成的贴图**
- ✅ **个性化角色设计**
- ✅ **专业质量图片**
- ✅ **可商用的内容**

## 🆘 常见问题

**Q: API密钥设置后仍显示演示模式？**
A: 请确保重启了Flask应用，并检查.env文件格式是否正确。

**Q: 担心API费用过高？**
A: 建议先小量测试（8张套装约3.3元），确认效果后再大量使用。

**Q: 生成的图片质量不满意？**
A: 可以尝试更详细的角色描述和不同的艺术风格。

**Q: 可以使用其他AI服务吗？**
A: 目前系统专门针对OpenAI进行优化，暂不支持其他服务。

---

## 🎯 下一步

配置完成API后，您就可以：

1. 🎨 **生成专业贴图** - 真实AI创作的高质量图片
2. 📦 **一键打包** - 直接上传到LINE Creators Market
3. 💼 **商业使用** - 用于个人或企业项目
4. 🚀 **规模化创作** - 批量生成不同风格的贴图套装

**立即开始体验：** [LINE贴图定制服务](http://localhost:5001/line_custom) 🎉
